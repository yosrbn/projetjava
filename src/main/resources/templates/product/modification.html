<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
<div th:replace="~{fragments/header::body}"></div>

<h1>Modifier un produit</h1>

<form method="POST" th:action="@{/produit/update}" th:object="${p}" enctype="multipart/form-data" ><!-- c'est pour retourner l'objet -->
 
   <input type="hidden" th:field="*{id}"/>
   
    <div class="form-group">
      <label for="nom">nom</label>
      <input type="text"  required ="text" th:field ="*{nom}" placeholder="nom" class="form-control" >
    </div>
  
    <div class="form-group">
      <label for="nom">Description</label>
      <input type="text"  required ="text" th:field ="*{description}" placeholder="Description" class="form-control" >
    </div>
    <div class="form-group">
      <label for="exampleInputEmail1">Prix</label>
      <input type="text" class="form-control"  aria-describedby="emailHelp" placeholder="Prix" th:field ="*{prix}" required="email">
    </div>

    <div class="mb-2">
        <td><img th:src="@{/produit/images/{imageName}(imageName=${p.image})}" width="70"
                 height="70"/>
        </td>
    </div>

    <div>
        <label>Photo </label>
        <input type="file" name="productImage" accept="image/png, image/jpeg" />
    </div>
    
     <div class="form-group">
        <label for="category">Cat√©gorie</label>
        <select name="categoryId" class="form-control">
            <option th:each="category : ${categories}" th:value="${category.id}"
                    th:text="${category.nom}" th:selected="${category.id eq p.category.id}"></option>
        </select>
    </div>
    
        <div class="form-group">
        <label for="fournisseur">Fournisseur</label>
        <select name="fournisseurId" class="form-control">
            <option th:each="fournisseur : ${fournisseurs}" th:value="${fournisseur.id}"
                    th:text="${fournisseur.nom}" th:selected="${fournisseur.id eq p.fournisseur.id}"></option>
        </select>
    </div>  

    
     <button type="submit" class="btn btn-primary">update</button>
</form>